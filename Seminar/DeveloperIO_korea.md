# AWS WAF가 뭔가요?

## AWS WAF란?
* WEB APPLICATION FIREWALL
* IDS/IPS: OS/MIDDLEWARE에 특화

## 구성
* WEB AC:
* rule group
  * statement(조건) -> action(행동)
    * ip 제한
    * rate based rule
    * 취약점에 관한 규칙(xss, sql 인젝션 등)
    * 악성 http 요청 여부 확인하는 규칙
    * waf를 ec2에서 사용하고 싶은 경우, aws marketplace에서 사용가능
* associated aws resources
## V1과 V2
* 다른 api 사용
* capacity (용량 단위 도입)
* aws 관리 규칙 추가
* 규칙 작성 방법 추가

## Q&A
* waf -> alb -> ecs로 사용 가능

# RDS Aurora에 대해 알아보자

## RSS란?
* aws 관리형 관계 데이터베이스 서비스
* 하드웨어 프로비저닝, 설정, 패치 및 백업

## RDS Aurora란?
* aws 클라우드를 위한 완전 관리형의 클라우드
* 인스턴스와 스토리지가 분리되어 1개의 가용영역에 2개 3개의 가용영역에 걸쳐 총 6개 생성
* 스토리지를 자동으로 10gb씩 죄대 128까지 가능
* 여러 리전으로 확장, 백업이 가능한 글로벌 데이터베이스 제공 가능
* 멀티 마스터 클라스터로 지속적인 가용성 사용 가능
  * 특정 기능 몇 개는 사용할 수 없음
* backtrack 기능으로 손실없이 어느 시점으로든지 백업 가능
  * mysql만 사용 가능
* 클러스터 캐쉬를 통한 빠른 복구 가능
  * 마스터와 캐쉬를 공유함. 공유를 통해 빠른 복구 가능
* 병렬 쿼리를 사용하여 뤄키 실행을 쾌속으로 처리
  * cpu가 있어서 인스턴스 뿐만 아닌 스토리지에서 사용가능
  * mysql 5.6, 5.7에서만 사용가능
* aurora serverless
  * 인스턴스층이 수요에 맞게 자동으로 조율하고 사용하지 않으면 종료
* 주의할 점!
  * 아래의 버전에서만 사용가능
  * mysql 5.6~5.7
  * postgresql 9.6.16~13.3

## RDS Aurora 구축
* vpc와 보안그룹, 서브넷 가용영역, 서브넷 그룹 생성
* db 생성
  * 오로라 생성 선택

## Q&A
* 현업에서 사용하는 사례
  * 넷플릭스에서 병렬 쿼리를 사용하여 수행
* rds에 개인정보 데이터 저장시 암호화 저장되는가? 설정 방법이 궁금하다. rds에 개인정보 db 접속로그 보관 1년이상 저장 설정과 계정 권한부여 로그 3년간 보관 설정 방법이 궁금하다. -> 개인정보 암호화와 로그 저장보관
* patch할 때, 다운 타임 발생
  * jdp를 사용해서 patch 중에서도 연결이 끊기지 않도록 설정 가능함.
  * 멀티 마스터 기능 사용하여 
* backtrack 중에 들어오는 요청은?
  * 백트랙 도중에는 db가 정지된다.
  * 데이터가 들어와도 데이터가 들어가지 않는다.
* aurora의 비용절감?
  * 예약 인스턴스를 사용하여 비용을 줄이거나 서버리스 기능을 사용하는게 좋지 않을까 생각함.
* rds 패치는 aws가 해주나요?
  * 오로라의 경우에는 패치도 자동으로 해줌.
* rds는 서버리스는 제공하지 않는가?
  * 서버리스는 오로라에서만 제공하고 있음

# 워드 프레스
## Q&A
* 악세스가 급증하면 aws요금도 많이 올라갈까요?
  * ec2 인스턴스는 시간당 요금을 청구하므로 액세스와는 상관없을 것이라고 생각한다.
* RDS를 사용하지 않고 EC2안에 DB스킴 생성사용시 RDS와 비교해 퍼포먼스 차이나 보안 문제점이 발생할 수 있습니까
  * 퍼포먼스 부분에서는 차이가 없을 것이라 생각하지만 보안에서는 차이점이 생길것 같다.
  * rds는 외부 접근 차단을 막을 수 있는 반면 ec2에 db 스킴 생성하면 ec2가 해킹당하면 함께 해킹당할 것이다.
* 도커와 비교해서 ec2로 구축했을 때 장점은?
  * 도커가 편할 것 같다.

# aws 사용 비용 슬랙으로 받아보기

## 사용한 aws 서비스 소개
* aws lambda
* aws dsms
* amazone event bridge
* amazone cost explore
